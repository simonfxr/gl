#!/bin/bash

args=( )

for arg; do
    case "$arg" in
        -D*|-Wl*|-fno-exceptions|-fno-rtti|-fopenmp|-fstack-protector|-ffast-math|-Wextra|-Wno-switch|-g*|-march=*)
            args=( "${args[@]}" -optc "$arg" )
        
            if [[ $arg = '-fopenmp' ]]; then
                args=( "${args[@]}" -lgomp )
            fi

            ;;

        *)
            args=( "${args[@]}" "$arg" ) ;;
    esac
done

# echo "executing GHC: ${args[@]}"
# echo "****"

exec ghc "${args[@]}"
